{"version":3,"sources":["hooks/index.ts","App.tsx","index.tsx"],"names":["OSS","require","process","REACT_APP_BUCKET","REACT_APP_REGION","REACT_APP_ACCESSKEYSECRET","REACT_APP_ACCESSKEYID","atob","useOss","client","useRef","region","accessKeyId","accessKeySecret","bucket","put","file","name","callback","current","then","App","useState","url","changeUrl","html","changeHtml","md","changeMd","updateUrl","upload","e","Array","from","target","files","useUpload","useEffect","document","addEventListener","event","items","clipboardData","length","i","type","indexOf","getAsFile","uuidv4","usePaste","id","className","title","multiple","onChange","width","value","disabled","readOnly","placeholder","text","datatype","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b0b4075a.chunk.js","sourcesContent":["import {ChangeEvent, useEffect, useRef} from \"react\";\nimport {v4 as uuidv4} from \"uuid\";\nconst OSS = require('ali-oss');\ninterface Upload{\n    (e:ChangeEvent<HTMLInputElement>,callback:(name:string)=>void): void\n}\n\nlet {\n    REACT_APP_BUCKET,\n    REACT_APP_REGION,\n    REACT_APP_ACCESSKEYSECRET,\n    REACT_APP_ACCESSKEYID\n} = process.env\n\nREACT_APP_ACCESSKEYSECRET = atob(REACT_APP_ACCESSKEYSECRET || '')\nREACT_APP_ACCESSKEYID = atob(REACT_APP_ACCESSKEYID || '')\n\nexport const useOss = ()=>{\n    const client = useRef(new OSS({\n        region: REACT_APP_REGION,\n        accessKeyId: REACT_APP_ACCESSKEYID,\n        accessKeySecret: REACT_APP_ACCESSKEYSECRET,\n        bucket: REACT_APP_BUCKET\n    }))\n    const put = useRef((file:File,name:string,callback:(name:string)=>void)=>{\n        client.current.put('/images/' + name,file).then(()=>{\n            callback(name)\n        })\n    })\n    return {client,put}\n}\n\nexport const useUpload = ()=>{\n    const {put} = useOss()\n    const upload =  useRef<(Upload)>((e,callback)=>{\n        const files = Array.from(e.target.files || [])\n        for(let file of files){\n            const {name} = file\n            put.current(file,name,callback)\n        }\n    })\n    return {upload}\n}\nexport const usePaste = (callback:(name:string)=>void)=>{\n    const {put} = useOss()\n    useEffect(()=>{\n        document.addEventListener('paste',(event)=>{\n            const items = event.clipboardData && event.clipboardData.items;\n            let file = null;\n            if (items && items.length) {\n                for (let i = 0; i < items.length; i++) {\n                    if (items[i].type.indexOf('image') !== -1) {\n                        file = items[i].getAsFile();\n                        break;\n                    }\n                }\n            }\n            if(file){\n                const name = uuidv4() + '-' + file.name\n                put.current(file,name,callback)\n            }\n        })\n    },[put,callback])\n}\n","import React, {useState,useRef} from 'react';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport {usePaste, useUpload} from \"./hooks\";\nimport './App.css';\n\nfunction App() {\n  const [url,changeUrl] = useState<string>('')\n  const [html,changeHtml] = useState<string>('')\n  const [md,changeMd] = useState<string>('')\n  const updateUrl = useRef((name:string)=>{\n    const url = 'https://likaiqiang-blog.oss-cn-beijing.aliyuncs.com/images/' + name\n    changeUrl(url)\n    changeHtml(`<img src=${url} alt=\"\"/>`)\n    changeMd(`![${name}](${url})`)\n  })\n  const {upload} = useUpload()\n  usePaste(updateUrl.current)\n  return (\n      <div id=\"main\">\n        <section>\n          <div className=\"holder-wrapper\">\n            <div className=\"image-holder\" title=\"点击上传图片到微博相册\"/>\n            <input type=\"file\" multiple onChange={e=>{\n              upload.current(e,updateUrl.current)\n            }}/>\n          </div>\n          <div className=\"table-wrapper\">\n            <table width=\"100%\">\n              <tbody>\n              <tr className=\"type-1\">\n                <td><span className=\"title\">URL</span></td>\n                <td><input value={url} type=\"text\" disabled readOnly\n                           placeholder=\"Uniform Resource Locator\"/>\n                </td>\n                <td>\n                  <CopyToClipboard text={url}>\n                    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                    <a className=\"button-copy\" datatype=\"URL\">Copy</a>\n                  </CopyToClipboard>\n                </td>\n              </tr>\n              <tr className=\"type-2\">\n                <td><span className=\"title\">HTML</span></td>\n                <td><input value={html} type=\"text\" disabled readOnly\n                           placeholder=\"HyperText Markup Language\"/>\n                </td>\n                <td>\n                  <CopyToClipboard text={html}>\n                    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                    <a className=\"button-copy\" datatype=\"HTML\">Copy</a>\n                  </CopyToClipboard>\n                </td>\n              </tr>\n              <tr className=\"type-4\">\n                <td><span className=\"title\">Markdown</span></td>\n                <td>\n                  <input value={md} type=\"text\" disabled readOnly  placeholder=\"Markdown\"/>\n                </td>\n                <td>\n                  {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                  <CopyToClipboard text={md}>\n                    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                    <a className=\"button-copy\" datatype=\"Markdown\">Copy</a>\n                  </CopyToClipboard>\n                </td>\n              </tr>\n              </tbody>\n            </table>\n          </div>\n        </section>\n      </div>\n  )\n}\nexport  default  App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}